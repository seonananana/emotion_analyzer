<!-- frontend/templates/index.html -->
{% extends "base.html" %}

{% block title %}학생 일기 감정 분석 - 입력{% endblock %}

{% block content %}
<section class="container">
  <h2 class="section-title">1. 학생 일기 입력</h2>

  <!-- JS에서 사용하는 클라이언트 측 에러 박스 -->
  <div id="error-box" class="alert alert-error hidden"></div>

  <!-- (옵션) 서버 렌더링 에러가 있을 때 표시 -->
  {% if error %}
  <div class="alert alert-error">
    {{ error }}
  </div>
  {% endif %}

  <!-- JS가 잡아쓸 수 있도록 id 추가 -->
  <form id="analyze-form" class="analyze-form" action="/analyze_form" method="post">
    <div class="form-row">
      <div class="form-group">
        <label for="student-name">이름</label>
        <input
          type="text"
          id="student-name"
          name="name"
          required
          placeholder="홍길동"
        />
      </div>

      <div class="form-group">
        <label for="student-age">나이</label>
        <input
          type="number"
          id="student-age"
          name="age"
          min="1"
          max="100"
          required
          placeholder="15"
        />
      </div>

      <div class="form-group">
        <label for="gender">성별</label>
        <select id="gender" name="gender" required>
          <option value="">선택</option>
          <option value="여">여</option>
          <option value="남">남</option>
          <option value="기타">기타</option>
        </select>
      </div>
    </div>

    <!-- 소중한 것 입력 -->
    <div class="form-group full-width">
      <label for="precious-thing">소중한 것 (선택)</label>
      <input
        type="text"
        id="precious-thing"
        name="precious_thing"
        placeholder="예: 가족, 친구, 음악, 나의 꿈"
      />
      <p class="help-text small">
        학생이 현재 가장 소중하게 생각하는 것을 간단히 적어 주세요. (선택 사항)
      </p>
    </div>

    <div class="form-group full-width">
      <label for="diary-text">일기 내용</label>
      <!-- textarea id도 JS에서 쓰는 이름으로 맞추기 -->
      <textarea
        id="diary-text"
        name="text"
        rows="10"
        placeholder="분석할 일기 내용을 여기에 입력하세요."
        required
      ></textarea>
    </div>

    <!-- LLM 사용 여부: 화면엔 안 보이고 항상 사용하도록 hidden 필드로 전달 -->
    <input type="hidden" id="use-llm" name="use_llm" value="true" />

    <div class="form-actions">
      <button type="submit" class="btn-primary">분석하기</button>
      <!-- 처음엔 숨겨뒀다가 JS에서만 보여줄 요소 -->
      <span id="loading-indicator" class="loading hidden">분석 중...</span>
    </div>
  </form>
</section>
{% endblock %}